---
import { Icon } from 'astro-icon/components';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  slug: string;
  tags: string[];
  readingTime?: string;
}

const { title, description, pubDate, slug, tags, readingTime } = Astro.props;

const formattedDate = pubDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'short',
  day: 'numeric'
});
---

<article class="group bg-cyber-navy/30 border border-cyber-slate rounded-2xl overflow-hidden card-hover">
  <a href={`/blog/${slug}`} class="block p-6">
    <!-- Tags -->
    <div class="flex flex-wrap gap-2 mb-4">
      {tags.slice(0, 3).map((tag) => (
        <span class="px-2 py-0.5 text-xs font-medium bg-cyber-dark border border-cyber-slate rounded-full text-neon-cyan">
          #{tag}
        </span>
      ))}
    </div>

    <!-- Title -->
    <h3 class="text-xl font-bold text-cyber-light mb-3 group-hover:text-neon-cyan transition-colors line-clamp-2">
      {title}
    </h3>

    <!-- Description -->
    <p class="text-cyber-steel text-sm mb-4 line-clamp-3">
      {description}
    </p>

    <!-- Meta -->
    <div class="flex items-center justify-between text-xs text-cyber-slate">
      <div class="flex items-center gap-4">
        <time datetime={pubDate.toISOString()} class="flex items-center gap-1">
          <Icon name="lucide:calendar" class="w-3 h-3" />
          {formattedDate}
        </time>
        {readingTime && (
          <span class="flex items-center gap-1">
            <Icon name="lucide:clock" class="w-3 h-3" />
            {readingTime}
          </span>
        )}
      </div>
      <span class="flex items-center gap-1 text-neon-cyan opacity-0 group-hover:opacity-100 transition-opacity">
        Read more
        <Icon name="lucide:arrow-right" class="w-3 h-3" />
      </span>
    </div>
  </a>
</article>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
